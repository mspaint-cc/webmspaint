@import "tailwindcss";
@import "tw-animate-css";

@config "./../../tailwind.config.js";

@custom-variant dark (&:is(.dark *));

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
  --color-sidebar-ring: var(--sidebar-ring);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar: var(--sidebar);
  --color-chart-5: var(--chart-5);
  --color-chart-4: var(--chart-4);
  --color-chart-3: var(--chart-3);
  --color-chart-2: var(--chart-2);
  --color-chart-1: var(--chart-1);
  --color-ring: var(--ring);
  --color-input: var(--input);
  --color-border: var(--border);
  --color-destructive: var(--destructive);
  --color-accent-foreground: var(--accent-foreground);
  --color-accent: var(--accent);
  --color-muted-foreground: var(--muted-foreground);
  --color-muted: var(--muted);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-secondary: var(--secondary);
  --color-primary-foreground: var(--primary-foreground);
  --color-primary: var(--primary);
  --color-popover-foreground: var(--popover-foreground);
  --color-popover: var(--popover);
  --color-card-foreground: var(--card-foreground);
  --color-card: var(--card);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --animate-marquee: marquee var(--duration) infinite linear;
  --animate-marquee-vertical: marquee-vertical var(--duration) linear infinite;
  @keyframes marquee {
  from {
    transform: translateX(0);
    }
  to {
    transform: translateX(calc(-100% - var(--gap)));
    }
  }
  @keyframes marquee-vertical {
  from {
    transform: translateY(0);
    }
  to {
    transform: translateY(calc(-100% - var(--gap)));
    }
  }
  --animate-rainbow: rainbow var(--speed, 2s) infinite linear;
  --color-color-5: var(--color-5);
  --color-color-4: var(--color-4);
  --color-color-3: var(--color-3);
  --color-color-2: var(--color-2);
  --color-color-1: var(--color-1)
;
  @keyframes rainbow {
  0% {
    background-position: 0%;}
  100% {
    background-position: 200%;}}
  --animate-shimmer-slide: shimmer-slide var(--speed) ease-in-out infinite alternate;
  --animate-spin-around: spin-around calc(var(--speed) * 2) infinite linear;
  @keyframes shimmer-slide {
  to {
    transform: translate(calc(100cqw - 100%), 0);}}
  @keyframes spin-around {
  0% {
    transform: translateZ(0) rotate(0);}
  15%, 35% {
    transform: translateZ(0) rotate(90deg);}
  65%, 85% {
    transform: translateZ(0) rotate(270deg);}
  100% {
    transform: translateZ(0) rotate(360deg);}}
  --animate-shiny-text: shiny-text 8s infinite;
  @keyframes shiny-text {
  0%, 90%, 100% {
    background-position: calc(-100% - var(--shiny-width)) 0;}
  30%, 60% {
    background-position: calc(100% + var(--shiny-width)) 0;}}
  --animate-shine: shine var(--duration) infinite linear;
  @keyframes shine {
  0% {
    background-position: 0% 0%;}
  50% {
    background-position: 100% 100%;}
  to {
    background-position: 0% 0%;}}}

:root {
  --radius: 0.625rem;
  --background: oklch(0.147 0.004 49.25);
  --foreground: oklch(0.985 0.001 106.423);
  --card: oklch(0.216 0.006 56.043);
  --card-foreground: oklch(0.985 0.001 106.423);
  --popover: oklch(0.216 0.006 56.043);
  --popover-foreground: oklch(0.985 0.001 106.423);
  --primary: oklch(0.923 0.003 48.717);
  --primary-foreground: oklch(0.216 0.006 56.043);
  --secondary: oklch(0.268 0.007 34.298);
  --secondary-foreground: oklch(0.985 0.001 106.423);
  --muted: oklch(0.268 0.007 34.298);
  --muted-foreground: oklch(0.709 0.01 56.259);
  --accent: oklch(0.268 0.007 34.298);
  --accent-foreground: oklch(0.985 0.001 106.423);
  --destructive: oklch(0.704 0.191 22.216);
  --border: oklch(1 0 0 / 10%);
  --input: oklch(1 0 0 / 15%);
  --ring: oklch(0.553 0.013 58.071);
  --chart-1: 220 70% 50%;
  --chart-5: 160 60% 45%;
  --chart-3: 30 80% 55%;
  --chart-4: 280 65% 60%;
  --chart-2: 340 75% 55%;
  --sidebar: oklch(0.216 0.006 56.043);
  --sidebar-foreground: oklch(0.985 0.001 106.423);
  --sidebar-primary: oklch(0.488 0.243 264.376);
  --sidebar-primary-foreground: oklch(0.985 0.001 106.423);
  --sidebar-accent: oklch(0.268 0.007 34.298);
  --sidebar-accent-foreground: oklch(0.985 0.001 106.423);
  --sidebar-border: oklch(1 0 0 / 10%);
  --sidebar-ring: oklch(0.553 0.013 58.071);
  --color-1: oklch(66.2% 0.225 25.9);
  --color-2: oklch(60.4% 0.26 302);
  --color-3: oklch(69.6% 0.165 251);
  --color-4: oklch(80.2% 0.134 225);
  --color-5: oklch(90.7% 0.231 133);
}

.dark {
  --background: oklch(0.147 0.004 49.25);
  --foreground: oklch(0.985 0.001 106.423);
  --card: oklch(0.216 0.006 56.043);
  --card-foreground: oklch(0.985 0.001 106.423);
  --popover: oklch(0.216 0.006 56.043);
  --popover-foreground: oklch(0.985 0.001 106.423);
  --primary: oklch(0.923 0.003 48.717);
  --primary-foreground: oklch(0.216 0.006 56.043);
  --secondary: oklch(0.268 0.007 34.298);
  --secondary-foreground: oklch(0.985 0.001 106.423);
  --muted: oklch(0.268 0.007 34.298);
  --muted-foreground: oklch(0.709 0.01 56.259);
  --accent: oklch(0.268 0.007 34.298);
  --accent-foreground: oklch(0.985 0.001 106.423);
  --destructive: oklch(0.704 0.191 22.216);
  --border: oklch(1 0 0 / 10%);
  --input: oklch(1 0 0 / 15%);
  --ring: oklch(0.553 0.013 58.071);
  --chart-1: 220 70% 50%;
  --chart-5: 160 60% 45%;
  --chart-3: 30 80% 55%;
  --chart-4: 280 65% 60%;
  --chart-2: 340 75% 55%;
  --sidebar-foreground: oklch(0.985 0.001 106.423);
  --sidebar-primary: oklch(0.488 0.243 264.376);
  --sidebar-primary-foreground: oklch(0.985 0.001 106.423);
  --sidebar-accent: oklch(0.268 0.007 34.298);
  --sidebar-accent-foreground: oklch(0.985 0.001 106.423);
  --sidebar-border: oklch(1 0 0 / 10%);
  --sidebar-ring: oklch(0.553 0.013 58.071);
  --color-1: oklch(66.2% 0.225 25.9);
  --color-2: oklch(60.4% 0.26 302);
  --color-3: oklch(69.6% 0.165 251);
  --color-4: oklch(80.2% 0.134 225);
  --color-5: oklch(90.7% 0.231 133);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }

  body {
    @apply bg-background text-foreground;
  }
}

/* Hide content until the epilepsy gate runs on first load */
/* (Removed gate-pending visibility mask — overlay covers content instead) */
/* Gate mounting now handled in React (no SSR mask needed) */

.no-scrollbar {
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none;    /* Firefox */
}
.no-scrollbar::-webkit-scrollbar {
  width: 0px;
  height: 0px;
  display: none;            /* Chrome, Safari, Opera */
}

/* Disable deep-fry effects within a subtree (used by the epilepsy gate) */
html.deep-fry .no-fry, html.deep-fry .no-fry * {
  filter: none !important;
  animation: none !important;
  text-shadow: none !important;
  mix-blend-mode: normal !important;
}

/* Deep Fry Mode — aggressively painful visuals */
html.deep-fry body {
  filter: saturate(600%) contrast(250%) hue-rotate(10deg) sepia(40%) brightness(120%);
}

html.deep-fry {
  cursor: crosshair !important;
}

html.deep-fry *,
html.deep-fry *::before,
html.deep-fry *::after {
  text-shadow: 0 0 2px #fff,
    1px 0 0 rgba(255, 0, 68, 0.8),
    -1px 0 0 rgba(0, 255, 213, 0.8),
    0 1px 0 rgba(255, 255, 0, 0.7);
  image-rendering: pixelated !important;
  -webkit-font-smoothing: none;
  -moz-osx-font-smoothing: auto;
}

/* Chaos effects */
.chaos-shake {
  animation: chaos-shake 90ms steps(2, end) 3;
}

@keyframes chaos-shake {
  0% { transform: translate(0, 0) rotate(0.2deg); }
  50% { transform: translate(2px, -2px) rotate(-0.2deg); }
  100% { transform: translate(-1px, 1px) rotate(0.1deg); }
}

.chaos-glitch {
  position: relative;
  animation: chaos-glitch 250ms steps(2, end) 2;
}

@keyframes chaos-glitch {
  0% { filter: hue-rotate(0deg) contrast(200%); }
  50% { filter: hue-rotate(180deg) contrast(300%); transform: translateX(1px); }
  100% { filter: hue-rotate(360deg) contrast(200%); transform: translateX(-1px); }
}

html.chaos-strobe body { filter: brightness(200%) contrast(300%) saturate(700%) hue-rotate(180deg) !important; }

/* Persistent tilt for overall unease */
body.chaos-tilt {
  animation: chaos-tilt 2.4s ease-in-out infinite alternate;
}
@keyframes chaos-tilt {
  from { transform: rotate(-0.8deg) skewX(-0.4deg); }
  to   { transform: rotate(0.9deg)  skewX(0.6deg); }
}

/* Occasional full invert */
html.chaos-invert body {
  filter: invert(1) hue-rotate(180deg) saturate(300%) !important;
}

/* Rainbow text effect for random elements */
.chaos-rainbow-text {
  background: linear-gradient(90deg, #ff0044, #ffee00, #00ff99, #00ccff, #9933ff, #ff0044);
  background-size: 300% 100%;
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent !important;
  animation: bg-sheen 1.2s linear infinite;
}

/* Falling FORTNITE stickers */
@keyframes chaos-fall {
  0% { transform: translateY(-10vh) rotate(-10deg); opacity: 0; }
  10% { opacity: 1; }
  100% { transform: translateY(110vh) rotate(15deg); opacity: 0; }
}

/* Scanlines + noise overlay */
html.deep-fry body::before,
html.deep-fry body::after {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 2147483640;
}

/* Scanlines */
html.deep-fry body::before {
  background: repeating-linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0.12) 0 1px,
      rgba(0, 0, 0, 0) 1px 3px
    );
  mix-blend-mode: multiply;
  animation: scan 0.8s linear infinite;
}

/* Color noise */
html.deep-fry body::after {
  background: 
    radial-gradient(circle at 15% 20%, rgba(255,0,0,0.15), transparent 40%),
    radial-gradient(circle at 80% 30%, rgba(0,255,200,0.15), transparent 40%),
    radial-gradient(circle at 30% 75%, rgba(255,255,0,0.12), transparent 40%);
  mix-blend-mode: screen;
  animation: noise 90ms steps(2, end) infinite;
}

/* Fortnite everywhere: tile the whole world with FORTNITE */
html.deep-fry body {
  background-image:
    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='480' height='240'>\
      <rect width='100%' height='100%' fill='black'/>\
      <text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-family='Impact, Arial Black, sans-serif' font-size='64' fill='%23ffffff' stroke='%2300ffee' stroke-width='2' opacity='0.2'>FORTNITE</text>\
    </svg>"),
    linear-gradient(45deg, #ff0044, #ff9900, #ffee00, #00ff99, #00ccff, #9933ff, #ff0044);
  background-size: 480px 240px, 400% 400% !important;
  background-repeat: repeat, no-repeat !important;
  animation: bg-rainbow 6s linear infinite;
}

/* Links blink and jiggle */
html.deep-fry a {
  animation: blink 0.9s steps(2, start) infinite, jiggle 120ms infinite alternate;
  text-decoration: underline wavy 3px #ff0044;
}

/* Headings wiggle and glow */
html.deep-fry h1, html.deep-fry h2, html.deep-fry h3, html.deep-fry h4 {
  position: relative;
  filter: drop-shadow(0 0 8px #ff0080) drop-shadow(0 0 12px #00ffee);
  animation: jiggle 140ms infinite alternate, hue 2.2s linear infinite;
}

/* Stamp FORTNITE behind all headings */
html.deep-fry h1::before, html.deep-fry h2::before, html.deep-fry h3::before, html.deep-fry h4::before {
  content: "FORTNITE";
  position: absolute;
  inset: auto auto 50% 50%;
  transform: translate(-50%, 50%) rotate(-8deg);
  font-size: 5rem;
  font-weight: 900;
  letter-spacing: 0.1em;
  color: rgba(255,255,255,0.06);
  pointer-events: none;
  z-index: -1;
}

/* Images get chromatic aberration and harsh contrast */
html.deep-fry img, html.deep-fry video, html.deep-fry canvas {
  filter: contrast(220%) saturate(300%) brightness(110%) drop-shadow(2px 0 0 #ff0044) drop-shadow(-2px 0 0 #00ffee);
  transform: translateZ(0);
  animation: jitter 80ms steps(2, end) infinite;
}

/* Buttons are offensively loud */
html.deep-fry button, html.deep-fry .btn, html.deep-fry [role="button"] {
  background-image: linear-gradient(90deg, #ff0044, #ffee00, #00ff99, #00ccff, #9933ff);
  background-size: 300% 100%;
  color: #000 !important;
  border: 3px solid #fff;
  animation: bg-sheen 1.2s linear infinite;
}

@keyframes jitter {
  0% { transform: translate(0, 0) rotate(0.1deg); }
  100% { transform: translate(1px, -1px) rotate(-0.1deg); }
}

@keyframes jiggle {
  from { transform: translateY(-1px) rotate(-0.2deg); }
  to { transform: translateY(1px) rotate(0.2deg); }
}

@keyframes blink {
  0%, 49% { opacity: 1; }
  50%, 100% { opacity: 0.25; }
}

@keyframes hue {
  to { filter: hue-rotate(360deg); }
}

@keyframes scan {
  0% { background-position: 0 -4px; }
  100% { background-position: 0 4px; }
}

@keyframes noise {
  0% { transform: translate(0, 0); }
  25% { transform: translate(-1px, 0); }
  50% { transform: translate(1px, 1px); }
  75% { transform: translate(0, -1px); }
  100% { transform: translate(0, 0); }
}

@keyframes bg-rainbow {
  0% { background-position: 0% 50%; }
  100% { background-position: 400% 50%; }
}

@keyframes bg-sheen {
  0% { background-position: 0% 0%; }
  100% { background-position: 300% 0%; }
}

/* CRT warp shimmer */
@keyframes crt-warp {
  0% { transform: scale(1.002) skewX(0.1deg) skewY(0.1deg); }
  100% { transform: scale(1.01) skewX(-0.15deg) skewY(-0.1deg); }
}
